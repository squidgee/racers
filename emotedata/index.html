<!DOCTYPE html>
<html lang="en">
<head>

<script src="tmi.js"></script>
<script src="emotedata.js"></script>

</head>

<body>

<script>

matchesinStrIMG = [];
matchesinStrNAME = [];
// 1. Remove all <a> blocks that contain title="Unlisted" anywhere inside them.
// This matches the entire block from the opening <a to the closing </a>
const unlistedRemovalRegex = /<a[^>]*>(?:(?!<\/a>)[\s\S])*title="Unlisted"[\s\S]*?<\/a>/g;

const emotedataFileB = emotedataFile.replace(unlistedRemovalRegex, '');

// 2. Run the original simple extraction on the now-clean data.
// We no longer need the complex negative lookaheads for exclusion.
const extractionRegex = /<a href="\/emotes\/([^"]+)".*?<span class="name svelte-clww9e">([^<]+)<\/span>/gs;

const extractedArray = [];
let match;

while ((match = extractionRegex.exec(emotedataFileB)) !== null) {
    extractedArray.push({
        id: match[1],
        name: match[2]
    });
}

console.log(extractedArray);

for (const item of extractedArray) {
    // 2. Access the data using the object's keys: item.id and item.name
    const emoteId = item.id;
    const emoteName = item.name;

    matchesinStrIMG.push(emoteId);
    matchesinStrNAME.push(emoteName);

    // 3. Construct the HTML string
    const emoteHtml = `
        <p>
            **ID:** ${emoteId} | 
            **Name:** ${emoteName}
            <img src="https://cdn.7tv.app/emote/${emoteId}/2x" alt="${emoteName}" style="margin-left: 10px;">
        </p>
    `;

    // 4. Append to the document body
    document.body.innerHTML += emoteHtml;
}
  
</script>

</body>

</html>
